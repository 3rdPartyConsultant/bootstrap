{"version":3,"file":"modal.js","sources":["../src/modal.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): modal.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport {\n  defineJQueryPlugin,\n  getElementFromSelector,\n  isRTL,\n  isVisible,\n  reflow,\n  typeCheckConfig\n} from './util/index'\nimport EventHandler from './dom/event-handler'\nimport Manipulator from './dom/manipulator'\nimport SelectorEngine from './dom/selector-engine'\nimport ScrollBarHelper from './util/scrollbar'\nimport BaseComponent from './base-component'\nimport Backdrop from './util/backdrop'\nimport FocusTrap from './util/focustrap'\nimport { enableDismissTrigger } from './util/component-functions'\n\n/**\n * Constants\n */\n\nconst NAME = 'modal'\nconst DATA_KEY = 'bs.modal'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\nconst ESCAPE_KEY = 'Escape'\n\nconst EVENT_HIDE = `hide${EVENT_KEY}`\nconst EVENT_HIDE_PREVENTED = `hidePrevented${EVENT_KEY}`\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`\nconst EVENT_SHOW = `show${EVENT_KEY}`\nconst EVENT_SHOWN = `shown${EVENT_KEY}`\nconst EVENT_RESIZE = `resize${EVENT_KEY}`\nconst EVENT_CLICK_DISMISS = `click.dismiss${EVENT_KEY}`\nconst EVENT_KEYDOWN_DISMISS = `keydown.dismiss${EVENT_KEY}`\nconst EVENT_MOUSEUP_DISMISS = `mouseup.dismiss${EVENT_KEY}`\nconst EVENT_MOUSEDOWN_DISMISS = `mousedown.dismiss${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_OPEN = 'modal-open'\nconst CLASS_NAME_FADE = 'fade'\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_NAME_STATIC = 'modal-static'\n\nconst OPEN_SELECTOR = '.modal.show'\nconst SELECTOR_DIALOG = '.modal-dialog'\nconst SELECTOR_MODAL_BODY = '.modal-body'\nconst SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"modal\"]'\n\nconst Default = {\n  backdrop: true,\n  keyboard: true,\n  focus: true\n}\n\nconst DefaultType = {\n  backdrop: '(boolean|string)',\n  keyboard: 'boolean',\n  focus: 'boolean'\n}\n\n/**\n * Class definition\n */\n\nclass Modal extends BaseComponent {\n  constructor(element, config) {\n    super(element)\n\n    this._config = this._getConfig(config)\n    this._dialog = SelectorEngine.findOne(SELECTOR_DIALOG, this._element)\n    this._backdrop = this._initializeBackDrop()\n    this._focustrap = this._initializeFocusTrap()\n    this._isShown = false\n    this._ignoreBackdropClick = false\n    this._isTransitioning = false\n    this._scrollBar = new ScrollBarHelper()\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  toggle(relatedTarget) {\n    return this._isShown ? this.hide() : this.show(relatedTarget)\n  }\n\n  show(relatedTarget) {\n    if (this._isShown || this._isTransitioning) {\n      return\n    }\n\n    const showEvent = EventHandler.trigger(this._element, EVENT_SHOW, {\n      relatedTarget\n    })\n\n    if (showEvent.defaultPrevented) {\n      return\n    }\n\n    this._isShown = true\n\n    if (this._isAnimated()) {\n      this._isTransitioning = true\n    }\n\n    this._scrollBar.hide()\n\n    document.body.classList.add(CLASS_NAME_OPEN)\n\n    this._adjustDialog()\n\n    this._setEscapeEvent()\n    this._setResizeEvent()\n\n    EventHandler.on(this._dialog, EVENT_MOUSEDOWN_DISMISS, () => {\n      EventHandler.one(this._element, EVENT_MOUSEUP_DISMISS, event => {\n        if (event.target === this._element) {\n          this._ignoreBackdropClick = true\n        }\n      })\n    })\n\n    this._showBackdrop(() => this._showElement(relatedTarget))\n  }\n\n  hide() {\n    if (!this._isShown || this._isTransitioning) {\n      return\n    }\n\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE)\n\n    if (hideEvent.defaultPrevented) {\n      return\n    }\n\n    this._isShown = false\n    const isAnimated = this._isAnimated()\n\n    if (isAnimated) {\n      this._isTransitioning = true\n    }\n\n    this._setEscapeEvent()\n    this._setResizeEvent()\n\n    this._focustrap.deactivate()\n\n    this._element.classList.remove(CLASS_NAME_SHOW)\n\n    EventHandler.off(this._element, EVENT_CLICK_DISMISS)\n    EventHandler.off(this._dialog, EVENT_MOUSEDOWN_DISMISS)\n\n    this._queueCallback(() => this._hideModal(), this._element, isAnimated)\n  }\n\n  dispose() {\n    for (const htmlElement of [window, this._dialog]) {\n      EventHandler.off(htmlElement, EVENT_KEY)\n    }\n\n    this._backdrop.dispose()\n    this._focustrap.deactivate()\n    super.dispose()\n  }\n\n  handleUpdate() {\n    this._adjustDialog()\n  }\n\n  // Private\n  _initializeBackDrop() {\n    return new Backdrop({\n      isVisible: Boolean(this._config.backdrop), // 'static' option will be translated to true, and booleans will keep their value\n      isAnimated: this._isAnimated()\n    })\n  }\n\n  _initializeFocusTrap() {\n    return new FocusTrap({\n      trapElement: this._element\n    })\n  }\n\n  _getConfig(config) {\n    config = {\n      ...Default,\n      ...Manipulator.getDataAttributes(this._element),\n      ...(typeof config === 'object' ? config : {})\n    }\n    typeCheckConfig(NAME, config, DefaultType)\n    return config\n  }\n\n  _showElement(relatedTarget) {\n    const isAnimated = this._isAnimated()\n    const modalBody = SelectorEngine.findOne(SELECTOR_MODAL_BODY, this._dialog)\n\n    if (!this._element.parentNode || this._element.parentNode.nodeType !== Node.ELEMENT_NODE) {\n      // Don't move modal's DOM position\n      document.body.append(this._element)\n    }\n\n    this._element.style.display = 'block'\n    this._element.removeAttribute('aria-hidden')\n    this._element.setAttribute('aria-modal', true)\n    this._element.setAttribute('role', 'dialog')\n    this._element.scrollTop = 0\n\n    if (modalBody) {\n      modalBody.scrollTop = 0\n    }\n\n    if (isAnimated) {\n      reflow(this._element)\n    }\n\n    this._element.classList.add(CLASS_NAME_SHOW)\n\n    const transitionComplete = () => {\n      if (this._config.focus) {\n        this._focustrap.activate()\n      }\n\n      this._isTransitioning = false\n      EventHandler.trigger(this._element, EVENT_SHOWN, {\n        relatedTarget\n      })\n    }\n\n    this._queueCallback(transitionComplete, this._dialog, isAnimated)\n  }\n\n  _setEscapeEvent() {\n    if (this._isShown) {\n      EventHandler.on(this._element, EVENT_KEYDOWN_DISMISS, event => {\n        if (this._config.keyboard && event.key === ESCAPE_KEY) {\n          event.preventDefault()\n          this.hide()\n        } else if (!this._config.keyboard && event.key === ESCAPE_KEY) {\n          this._triggerBackdropTransition()\n        }\n      })\n    } else {\n      EventHandler.off(this._element, EVENT_KEYDOWN_DISMISS)\n    }\n  }\n\n  _setResizeEvent() {\n    if (this._isShown) {\n      EventHandler.on(window, EVENT_RESIZE, () => this._adjustDialog())\n    } else {\n      EventHandler.off(window, EVENT_RESIZE)\n    }\n  }\n\n  _hideModal() {\n    this._element.style.display = 'none'\n    this._element.setAttribute('aria-hidden', true)\n    this._element.removeAttribute('aria-modal')\n    this._element.removeAttribute('role')\n    this._isTransitioning = false\n    this._backdrop.hide(() => {\n      document.body.classList.remove(CLASS_NAME_OPEN)\n      this._resetAdjustments()\n      this._scrollBar.reset()\n      EventHandler.trigger(this._element, EVENT_HIDDEN)\n    })\n  }\n\n  _showBackdrop(callback) {\n    EventHandler.on(this._element, EVENT_CLICK_DISMISS, event => {\n      if (this._ignoreBackdropClick) {\n        this._ignoreBackdropClick = false\n        return\n      }\n\n      if (event.target !== event.currentTarget) {\n        return\n      }\n\n      if (this._config.backdrop === true) {\n        this.hide()\n      } else if (this._config.backdrop === 'static') {\n        this._triggerBackdropTransition()\n      }\n    })\n\n    this._backdrop.show(callback)\n  }\n\n  _isAnimated() {\n    return this._element.classList.contains(CLASS_NAME_FADE)\n  }\n\n  _triggerBackdropTransition() {\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE_PREVENTED)\n    if (hideEvent.defaultPrevented) {\n      return\n    }\n\n    const { classList, scrollHeight, style } = this._element\n    const isModalOverflowing = scrollHeight > document.documentElement.clientHeight\n\n    // return if the following background transition hasn't yet completed\n    if ((!isModalOverflowing && style.overflowY === 'hidden') || classList.contains(CLASS_NAME_STATIC)) {\n      return\n    }\n\n    if (!isModalOverflowing) {\n      style.overflowY = 'hidden'\n    }\n\n    classList.add(CLASS_NAME_STATIC)\n    this._queueCallback(() => {\n      classList.remove(CLASS_NAME_STATIC)\n      if (!isModalOverflowing) {\n        this._queueCallback(() => {\n          style.overflowY = ''\n        }, this._dialog)\n      }\n    }, this._dialog)\n\n    this._element.focus()\n  }\n\n  /**\n   * The following methods are used to handle overflowing modals\n   */\n\n  _adjustDialog() {\n    const isModalOverflowing = this._element.scrollHeight > document.documentElement.clientHeight\n    const scrollbarWidth = this._scrollBar.getWidth()\n    const isBodyOverflowing = scrollbarWidth > 0\n\n    if ((!isBodyOverflowing && isModalOverflowing && !isRTL()) || (isBodyOverflowing && !isModalOverflowing && isRTL())) {\n      this._element.style.paddingLeft = `${scrollbarWidth}px`\n    }\n\n    if ((isBodyOverflowing && !isModalOverflowing && !isRTL()) || (!isBodyOverflowing && isModalOverflowing && isRTL())) {\n      this._element.style.paddingRight = `${scrollbarWidth}px`\n    }\n  }\n\n  _resetAdjustments() {\n    this._element.style.paddingLeft = ''\n    this._element.style.paddingRight = ''\n  }\n\n  // Static\n  static jQueryInterface(config, relatedTarget) {\n    return this.each(function () {\n      const data = Modal.getOrCreateInstance(this, config)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config](relatedTarget)\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, function (event) {\n  const target = getElementFromSelector(this)\n\n  if (['A', 'AREA'].includes(this.tagName)) {\n    event.preventDefault()\n  }\n\n  EventHandler.one(target, EVENT_SHOW, showEvent => {\n    if (showEvent.defaultPrevented) {\n      // only register focus restorer if modal will actually get shown\n      return\n    }\n\n    EventHandler.one(target, EVENT_HIDDEN, () => {\n      if (isVisible(this)) {\n        this.focus()\n      }\n    })\n  })\n\n  // avoid conflict when clicking moddal toggler while another one is open\n  const allReadyOpen = SelectorEngine.findOne(OPEN_SELECTOR)\n  if (allReadyOpen) {\n    Modal.getInstance(allReadyOpen).hide()\n  }\n\n  const data = Modal.getOrCreateInstance(target)\n\n  data.toggle(this)\n})\n\nenableDismissTrigger(Modal)\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Modal)\n\nexport default Modal\n"],"names":["NAME","DATA_KEY","EVENT_KEY","DATA_API_KEY","ESCAPE_KEY","EVENT_HIDE","EVENT_HIDE_PREVENTED","EVENT_HIDDEN","EVENT_SHOW","EVENT_SHOWN","EVENT_RESIZE","EVENT_CLICK_DISMISS","EVENT_KEYDOWN_DISMISS","EVENT_MOUSEUP_DISMISS","EVENT_MOUSEDOWN_DISMISS","EVENT_CLICK_DATA_API","CLASS_NAME_OPEN","CLASS_NAME_FADE","CLASS_NAME_SHOW","CLASS_NAME_STATIC","OPEN_SELECTOR","SELECTOR_DIALOG","SELECTOR_MODAL_BODY","SELECTOR_DATA_TOGGLE","Default","backdrop","keyboard","focus","DefaultType","Modal","BaseComponent","constructor","element","config","_config","_getConfig","_dialog","SelectorEngine","findOne","_element","_backdrop","_initializeBackDrop","_focustrap","_initializeFocusTrap","_isShown","_ignoreBackdropClick","_isTransitioning","_scrollBar","ScrollBarHelper","toggle","relatedTarget","hide","show","showEvent","EventHandler","trigger","defaultPrevented","_isAnimated","document","body","classList","add","_adjustDialog","_setEscapeEvent","_setResizeEvent","on","one","event","target","_showBackdrop","_showElement","hideEvent","isAnimated","deactivate","remove","off","_queueCallback","_hideModal","dispose","htmlElement","window","handleUpdate","Backdrop","isVisible","Boolean","FocusTrap","trapElement","Manipulator","getDataAttributes","typeCheckConfig","modalBody","parentNode","nodeType","Node","ELEMENT_NODE","append","style","display","removeAttribute","setAttribute","scrollTop","reflow","transitionComplete","activate","key","preventDefault","_triggerBackdropTransition","_resetAdjustments","reset","callback","currentTarget","contains","scrollHeight","isModalOverflowing","documentElement","clientHeight","overflowY","scrollbarWidth","getWidth","isBodyOverflowing","isRTL","paddingLeft","paddingRight","jQueryInterface","each","data","getOrCreateInstance","TypeError","getElementFromSelector","includes","tagName","allReadyOpen","getInstance","enableDismissTrigger","defineJQueryPlugin"],"mappings":"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"}
